/**
 * ========================================
 * TALON - Eventi Inserisci Styles
 * File: static/css/components/eventi-inserisci-styles.css
 * 
 * Versione: 1.0.0
 * Descrizione: Stili specifici per template inserisci_evento.html
 * Dependencies: Bootstrap 5, form_fixes.css
 * ========================================
 */

/* ========================================
   VARIABILI CSS TALON EVENTI
   ======================================== */
:root {
  --eventi-primary: #667eea;
  --eventi-secondary: #4a90e2;
  --eventi-success: #28a745;
  --eventi-danger: #dc3545;
  --eventi-warning: #ffc107;
  --eventi-info: #17a2b8;
  --eventi-light: #f8f9fa;
  --eventi-white: #ffffff;
  --eventi-border: #dee2e6;
  --eventi-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  --eventi-radius: 8px;
  --eventi-transition: all 0.3s ease;
}

/* ========================================
   LAYOUT CONTAINER E SEZIONI FORM
   ======================================== */

/* Container principale form */
.form-container {
    display: block !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    padding: 20px !important;
    margin: 0 auto !important;
    width: 100% !important;
    max-width: 1000px !important;
    box-sizing: border-box !important;
    background: transparent !important;
    min-height: calc(100vh - 120px) !important;
}

/* Sezioni form con styling uniforme */
.form-section {
    background: white !important;
    border-radius: 10px !important;
    padding: 25px !important;
    margin-bottom: 20px !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08) !important;
    display: block !important;
    overflow: visible !important;
}

/* ========================================
   CONTROLLI FORM E INPUT
   ======================================== */

/* Stile uniforme per tutti i form control */
.form-control {
    height: 42px !important;
    min-height: 42px !important;
    padding: 10px 12px !important;
    width: 100% !important;
    box-sizing: border-box !important;
    border: 1px solid #ced4da !important;
    border-radius: 5px !important;
    font-size: 0.95rem !important;
}

/* Textarea con altezza dinamica */
textarea.form-control {
    height: auto !important;
    min-height: 100px !important;
}

/* Select con altezza fissa */
select.form-control,
select.form-select {
    height: 42px !important;
    min-height: 42px !important;
    max-height: 42px !important;
    padding: 10px 12px !important;
    font-size: 0.95rem !important;
    line-height: 22px !important;
}

/* Note aggiuntive con altezza specifica */
#note.form-control {
    height: auto !important;
    min-height: 100px !important;
    max-height: none !important;
}

/* ========================================
   LAYOUT FORM ROWS E GRUPPI
   ======================================== */

/* Form row con gap uniforme */
.form-row {
    display: flex;
    gap: 20px;
    margin-bottom: 1rem;
}

.form-row .form-group {
    flex: 1;
    margin-bottom: 0;
}

/* Form group base */
.form-group {
    margin-bottom: 1rem;
}

.form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 5px;
    color: #495057;
}

/* Campo obbligatorio */
.required {
    color: #dc3545;
}

/* Titoli sezioni */
.section-title {
    color: #333;
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 20px;
    padding-bottom: 8px;
    border-bottom: 2px solid #667eea;
}

/* Indicatore campi obbligatori */
.form-control:required {
    border-left: 3px solid #667eea;
}

/* ========================================
   MODAL SISTEMA Z-INDEX E POSITIONING
   ======================================== */

/* Modal base con z-index massimo */
.modal {
    z-index: 99999 !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
}

/* Backdrop con z-index controllato */
.modal-backdrop {
    z-index: 1000 !important;
    opacity: 0.3 !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    pointer-events: none !important;
    background-color: rgba(0, 0, 0, 0.3) !important;
}

#modalSeguiti + .modal-backdrop,
.modal-backdrop.show,
body.modal-open .modal-backdrop {
    z-index: 1000 !important;
    opacity: 0.3 !important;
    pointer-events: none !important;
}

/* Dialog container */
.modal-dialog {
    z-index: 100000 !important;
    position: relative !important;
}

/* Modal seguiti specifico */
#modalSeguiti {
    z-index: 99999 !important;
}

#modalSeguiti .modal-dialog {
    z-index: 100000 !important;
    max-width: 90% !important;
    width: 1000px !important;
    margin: 80px auto 1.75rem auto !important;
    padding-top: 20px !important;
}

#modalSeguiti .modal-content {
    border-radius: 10px !important;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3) !important;
    z-index: 10001 !important;
    position: relative !important;
    pointer-events: all !important;
}

#modalSeguiti .modal-body,
#modalSeguiti .modal-header,
#modalSeguiti .modal-footer {
    pointer-events: all !important;
    z-index: 10002 !important;
    position: relative !important;
}

/* Elementi interattivi nel modal */
#modalSeguiti input,
#modalSeguiti button,
#modalSeguiti select,
#modalSeguiti textarea,
#modalSeguiti .table,
#modalSeguiti .btn-close,
#modalSeguiti tr,
#modalSeguiti td,
#modalSeguiti th,
#modalSeguiti .form-control,
#modalSeguiti .btn,
#modalSeguiti .alert {
    pointer-events: all !important;
    z-index: 10003 !important;
    position: relative !important;
}

#modalSeguiti * {
    pointer-events: all !important;
}

body.modal-open .modal-backdrop {
    pointer-events: none !important;
}

#modalSeguiti + .modal-backdrop,
.modal-backdrop {
    display: none !important;
}

#modalSeguiti.show {
    display: block !important;
    z-index: 99999 !important;
}

#modalSeguiti.show .modal-dialog {
    z-index: 100000 !important;
}

/* ========================================
   STYLING SPECIFICO MODAL SEGUITI
   ======================================== */

/* Header con gradiente */
#modalSeguiti .modal-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-top-left-radius: 10px !important;
    border-top-right-radius: 10px !important;
}

#modalSeguiti .modal-title {
    font-weight: 600 !important;
}

#modalSeguiti .btn-close {
    filter: invert(1) !important;
}

/* Tabelle responsive nel modal */
#modalSeguiti .table-responsive {
    max-height: 400px !important;
    overflow-y: auto !important;
    border: 1px solid #dee2e6 !important;
    border-radius: 5px !important;
}

#modalSeguiti .table {
    margin-bottom: 0 !important;
    font-size: 0.9rem !important;
}

#modalSeguiti .table th {
    background-color: #f8f9fa !important;
    position: sticky !important;
    top: 0 !important;
    z-index: 10 !important;
    border-bottom: 2px solid #dee2e6 !important;
}

#modalSeguiti .table td {
    vertical-align: middle !important;
    padding: 8px !important;
}

#modalSeguiti .btn-sm {
    padding: 4px 8px !important;
    font-size: 0.8rem !important;
}

/* Sezione seguiti selezionati */
#seguiti-selezionati {
    max-height: 200px !important;
    overflow-y: auto !important;
}

/* Form controls nel modal */
#modalSeguiti .form-control {
    border-radius: 5px !important;
    border: 1px solid #ced4da !important;
}

#modalSeguiti .form-control:focus {
    border-color: #667eea !important;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25) !important;
}

/* Alert nel modal */
#modalSeguiti .alert {
    margin-bottom: 1rem !important;
    padding: 10px 15px !important;
}

/* Footer modal */
#modalSeguiti .modal-footer {
    background-color: #f8f9fa !important;
    border-bottom-left-radius: 10px !important;
    border-bottom-right-radius: 10px !important;
}

/* Badge */
#modalSeguiti .badge {
    font-size: 0.75em !important;
}

/* ========================================
   ANIMAZIONI MODAL
   ======================================== */

.modal.show {
    display: block !important;
}

.modal.fade .modal-dialog {
    transform: translateY(-50px) !important;
    transition: transform 0.3s ease-out !important;
}

.modal.show .modal-dialog {
    transform: translateY(0) !important;
}

/* ========================================
   LAYOUT E SPACING SPECIFICI
   ======================================== */

/* Form group per sezione seguiti eventi */
.eventi-seguiti-section {
  margin-top: 20px;
}

/* Container per lista seguiti eventi */
.eventi-lista-seguiti {
  display: none;
}

.eventi-lista-seguiti.show {
  display: block;
}

/* Sezione seguiti selezionati nel modal */
.eventi-seguiti-selezionati {
  display: none;
}

.eventi-seguiti-selezionati.show {
  display: block;
}

/* ========================================
   MODAL SPECIFICI EVENTI
   ======================================== */

/* Header modal ricerca eventi seguiti */
.modal-ricerca-seguiti .modal-header {
  background: linear-gradient(135deg, var(--eventi-primary), var(--eventi-secondary));
  color: white;
  border-bottom: none;
  border-radius: var(--eventi-radius) var(--eventi-radius) 0 0;
}

.modal-ricerca-seguiti .modal-title {
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Pulsante chiusura modal personalizzato */
.modal-ricerca-seguiti .btn-close-custom {
  background-color: var(--eventi-white) !important;
  opacity: 1 !important;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--eventi-transition);
  border: none;
  filter: invert(0);
}

.modal-ricerca-seguiti .btn-close-custom:hover {
  background-color: var(--eventi-light) !important;
  transform: scale(1.05);
}

.modal-ricerca-seguiti .btn-close-custom:focus {
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
}

/* Body modal con padding ottimizzato */
.modal-ricerca-seguiti .modal-body {
  padding: 1.5rem;
  max-height: 70vh;
  overflow-y: auto;
}

/* Footer modal con spacing migliorato */
.modal-ricerca-seguiti .modal-footer {
  padding: 1rem 1.5rem;
  border-top: 1px solid var(--eventi-border);
  background-color: var(--eventi-light);
  border-radius: 0 0 var(--eventi-radius) var(--eventi-radius);
}

/* ========================================
   INPUT E FORM CONTROLS SPECIFICI
   ======================================== */

/* Input ricerca protocollo con uppercase automatico */
.eventi-search-protocollo {
  text-transform: uppercase !important;
  font-family: 'Courier New', monospace;
  letter-spacing: 0.5px;
  font-weight: 500;
}

.eventi-search-protocollo::placeholder {
  text-transform: none;
  font-family: inherit;
  letter-spacing: normal;
  font-weight: normal;
  opacity: 0.6;
}

/* Input date con styling consistente */
.eventi-search-data {
  font-family: inherit;
}

/* ========================================
   PULSANTI SPECIFICI EVENTI
   ======================================== */

/* Pulsante aggiungi seguiti */
.btn-aggiungi-seguiti {
  background: linear-gradient(135deg, var(--eventi-secondary), var(--eventi-primary));
  border: none;
  color: white;
  font-weight: 500;
  transition: var(--eventi-transition);
  box-shadow: var(--eventi-shadow);
}

.btn-aggiungi-seguiti:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
  background: linear-gradient(135deg, var(--eventi-primary), var(--eventi-secondary));
}

.btn-aggiungi-seguiti:focus {
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.25);
}

/* Pulsanti modal footer */
.modal-ricerca-seguiti .btn-secondary {
  background-color: #6c757d;
  border-color: #6c757d;
  transition: var(--eventi-transition);
}

.modal-ricerca-seguiti .btn-secondary:hover {
  background-color: #5a6268;
  border-color: #545b62;
  transform: translateY(-1px);
}

.modal-ricerca-seguiti .btn-success {
  background: linear-gradient(135deg, var(--eventi-success), #20c997);
  border: none;
  transition: var(--eventi-transition);
}

.modal-ricerca-seguiti .btn-success:hover {
  background: linear-gradient(135deg, #20c997, var(--eventi-success));
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
}

/* ========================================
   SEZIONI CONTENUTI DINAMICI
   ======================================== */

/* Container per risultati ricerca */
.eventi-risultati-ricerca {
  margin-top: 1rem;
  min-height: 200px;
  max-height: 400px;
  overflow-y: auto;
  border: 1px solid var(--eventi-border);
  border-radius: var(--eventi-radius);
  padding: 1rem;
  background-color: var(--eventi-white);
}

/* Container per seguiti selezionati */
.eventi-seguiti-container {
  margin-top: 1rem;
  padding: 1rem;
  background-color: var(--eventi-light);
  border: 1px solid var(--eventi-border);
  border-radius: var(--eventi-radius);
  border-left: 4px solid var(--eventi-warning);
}

.eventi-seguiti-container h6 {
  color: var(--eventi-primary);
  font-weight: 600;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Lista seguiti con styling migliorato */
.eventi-seguito-item {
  background: var(--eventi-white);
  border: 1px solid var(--eventi-border);
  border-radius: var(--eventi-radius);
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  transition: var(--eventi-transition);
  box-shadow: var(--eventi-shadow);
}

.eventi-seguito-item:hover {
  border-color: var(--eventi-primary);
  box-shadow: 0 4px 8px rgba(102, 126, 234, 0.1);
}

.eventi-seguito-item strong {
  color: var(--eventi-primary);
}

.eventi-seguito-item small {
  color: #6c757d;
}

/* ========================================
   TABELLE RISULTATI RICERCA
   ======================================== */

.eventi-tabella-risultati {
  font-size: 0.9rem;
}

.eventi-tabella-risultati .table-hover tbody tr:hover {
  background-color: rgba(102, 126, 234, 0.05);
}

.eventi-tabella-risultati .btn-sm {
  padding: 0.25rem 0.5rem;
  font-size: 0.8rem;
  border-radius: 4px;
  transition: var(--eventi-transition);
}

.eventi-tabella-risultati .btn-outline-primary:hover {
  background-color: var(--eventi-primary);
  border-color: var(--eventi-primary);
  transform: scale(1.05);
}

.eventi-tabella-risultati .btn-warning {
  background-color: var(--eventi-warning);
  border-color: var(--eventi-warning);
  color: #212529;
}

/* Badge personalizzati */
.eventi-badge-positivo {
  background-color: var(--eventi-success) !important;
}

.eventi-badge-negativo {
  background-color: var(--eventi-danger) !important;
}

.eventi-badge-tipo {
  background-color: #6c757d !important;
  font-size: 0.75rem;
}

/* ========================================
   ALERT E MESSAGGI
   ======================================== */

.eventi-alert-info {
  background: linear-gradient(135deg, rgba(23, 162, 184, 0.1), rgba(102, 126, 234, 0.1));
  border-left: 4px solid var(--eventi-info);
  border-radius: var(--eventi-radius);
}

.eventi-alert-success {
  background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(32, 201, 151, 0.1));
  border-left: 4px solid var(--eventi-success);
  border-radius: var(--eventi-radius);
}

.eventi-alert-warning {
  background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1));
  border-left: 4px solid var(--eventi-warning);
  border-radius: var(--eventi-radius);
}

.eventi-alert-danger {
  background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(255, 82, 82, 0.1));
  border-left: 4px solid var(--eventi-danger);
  border-radius: var(--eventi-radius);
}

/* ========================================
   RESPONSIVE DESIGN
   ======================================== */

/* Tablet */
@media (max-width: 992px) {
  .modal-ricerca-seguiti .modal-dialog {
    max-width: 90vw;
  }
  
  .eventi-risultati-ricerca {
    max-height: 300px;
    font-size: 0.85rem;
  }
  
  .eventi-tabella-risultati {
    font-size: 0.8rem;
  }
}

/* Mobile */
@media (max-width: 768px) {
  .eventi-seguiti-section {
    margin-top: 15px;
  }
  
  .modal-ricerca-seguiti .modal-body {
    padding: 1rem;
    max-height: 60vh;
  }
  
  .eventi-risultati-ricerca {
    max-height: 250px;
    padding: 0.75rem;
  }
  
  .eventi-seguito-item {
    padding: 0.5rem;
    font-size: 0.9rem;
  }
  
  .eventi-tabella-risultati .btn-sm {
    padding: 0.2rem 0.4rem;
    font-size: 0.75rem;
  }
}

/* Mobile piccolo */
@media (max-width: 576px) {
  .modal-ricerca-seguiti .modal-dialog {
    margin: 0.5rem;
  }
  
  .eventi-search-protocollo,
  .eventi-search-data {
    font-size: 16px; /* Previene zoom su iOS */
  }
}

/* ========================================
   ANIMAZIONI E TRANSIZIONI
   ======================================== */

/* Fade in per elementi dinamici */
@keyframes eventieFadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.eventi-fade-in {
  animation: eventieFadeIn 0.3s ease-out;
}

/* Slide in per modal */
@keyframes eventiSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.modal-ricerca-seguiti.show .modal-dialog {
  animation: eventiSlideIn 0.3s ease-out;
}

/* ========================================
   FIX SLIM SELECT SPECIFICI PER EVENTI
   ======================================== */

/* Fix uniformità altezza con altri campi form */
.talon-slim-select .ss-main .ss-single {
    min-height: 42px !important;
    height: 42px !important;
    padding: 10px 40px 10px 12px !important;
    box-sizing: border-box !important;
    display: flex !important;
    align-items: center !important;
}

/* Fix testo all'interno del select */
.talon-slim-select .ss-main .ss-single .ss-placeholder,
.talon-slim-select .ss-main .ss-single .ss-value {
    line-height: 20px !important;
    font-size: 0.95rem !important;
    margin: 0 !important;
}

/* Freccia Slim Select allineata */
.talon-slim-select .ss-main .ss-arrow {
    height: 20px !important;
    width: 20px !important;
    right: 12px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
}

/* Select specifici per enti e tipologie */
#ente_id,
#tipologia_evento_id {
    height: 42px !important;
    min-height: 42px !important;
}

/* Dropdown consistency */
.talon-slim-select .ss-content {
    border-radius: 5px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12) !important;
    border: 1px solid var(--eventi-primary) !important;
    z-index: 9999 !important;
    position: absolute !important;
    background: white !important;
}

/* Fix specifico per dropdown tipologia evento */
#tipologia_evento_id + .ss-main .ss-content {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    z-index: 10000 !important;
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    right: 0 !important;
    max-height: 300px !important;
    overflow-y: auto !important;
    background: white !important;
    border: 1px solid var(--eventi-primary) !important;
    border-top: none !important;
    border-radius: 0 0 5px 5px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15) !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Assicura che le opzioni siano visibili */
#tipologia_evento_id + .ss-main .ss-content .ss-list {
    display: block !important;
    max-height: 280px !important;
    overflow-y: auto !important;
    padding: 0 !important;
}

/* Stile opzioni specifico per tipologia */
#tipologia_evento_id + .ss-main .ss-option {
    display: block !important;
    padding: 8px 12px !important;
    min-height: 32px !important;
    line-height: 1.4 !important;
    background: white !important;
    color: #333 !important;
    border: none !important;
    cursor: pointer !important;
}

#tipologia_evento_id + .ss-main .ss-option:hover {
    background: var(--eventi-light) !important;
    color: var(--eventi-primary) !important;
}

/* Opzioni con padding consistente */
.talon-slim-select .ss-option {
    padding: 8px 12px !important;
    font-size: 0.95rem !important;
    line-height: 1.4 !important;
}

/* Highlight ricerca */
.talon-slim-select .ss-option .ss-search-highlight {
    background: var(--eventi-warning) !important;
    color: #000 !important;
    font-weight: 600 !important;
}

/* ========================================
   PREVENZIONE FOUC (Flash of Unstyled Content)
   ======================================== */

/* Nasconde i select durante l'inizializzazione per evitare flash */
.slim-select-initializing {
    opacity: 0 !important;
    pointer-events: none !important;
    transition: opacity 0.2s ease-in-out !important;
}

/* Mostra i select con fade-in smooth dopo inizializzazione */
.slim-select-ready {
    opacity: 1 !important;
    pointer-events: all !important;
    transition: opacity 0.3s ease-in-out !important;
}

/* Placeholder visuale durante caricamento Slim Select */
.slim-select-placeholder {
    height: 42px !important;
    background: #f8f9fa !important;
    border: 1px solid #ced4da !important;
    border-radius: 5px !important;
    display: flex !important;
    align-items: center !important;
    padding: 0 35px 0 12px !important;
    position: relative !important;
    color: #6c757d !important;
    font-size: 0.95rem !important;
}

.slim-select-placeholder::after {
    content: "⏳ Caricamento...";
    font-size: 0.85rem;
}

.slim-select-placeholder::before {
    content: "";
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 6px solid #6c757d;
}

/* Override per select nascosti durante inizializzazione Slim Select */
select[data-slim-working="true"] {
    display: none !important;
    visibility: hidden !important;
    position: absolute !important;
    left: -9999px !important;
    opacity: 0 !important;
}

/* Animazione di loading per i select */
@keyframes slimSelectPulse {
    0% { background-color: #f8f9fa; }
    50% { background-color: #e9ecef; }
    100% { background-color: #f8f9fa; }
}

.slim-select-loading {
    animation: slimSelectPulse 1.5s ease-in-out infinite;
}

/* ========================================
   UTILITY CLASSES SPECIFICHE EVENTI
   ======================================== */

.eventi-hidden {
  display: none !important;
}

.eventi-visible {
  display: block !important;
}

.eventi-uppercase {
  text-transform: uppercase !important;
}

.eventi-monospace {
  font-family: 'Courier New', monospace !important;
}

.eventi-shadow-sm {
  box-shadow: var(--eventi-shadow) !important;
}

.eventi-shadow-md {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12) !important;
}

.eventi-border-primary {
  border-color: var(--eventi-primary) !important;
}

.eventi-text-primary {
  color: var(--eventi-primary) !important;
}

.eventi-bg-light-primary {
  background-color: rgba(102, 126, 234, 0.1) !important;
}