{% extends "_base.html" %}
{% block title %}Nuova Operazione - TALON{% endblock %}
{% block content %}
<div class="form-container">
    <h1>Nuova Operazione</h1>
    <form action="{{ url_for('operazioni.salva_operazione') }}" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="nome_missione">Nome Missione (es. UNIFIL):</label>
            <input type="text" id="nome_missione" name="nome_missione" required>
        </div>
        <div class="form-group">
            <label for="nome_breve">Nome Breve (Acronimo):</label>
            <input type="text" id="nome_breve" name="nome_breve">
        </div>
        <div class="form-group">
            <label for="teatro_operativo">Teatro Operativo (es. LIBANO):</label>
            <input type="text" id="teatro_operativo" name="teatro_operativo">
        </div>
        <div class="form-group">
            <label for="nazione">Nazione:</label>
            <input type="text" id="nazione" name="nazione">
        </div>
        <div class="form-group">
            <label for="data_inizio">Data Inizio Mandato:</label>
            <input type="date" id="data_inizio" name="data_inizio">
        </div>
        <div class="form-group">
            <label for="data_fine">Data Fine Mandato (opzionale):</label>
            <input type="date" id="data_fine" name="data_fine">
        </div>
        <div class="form-group">
            <label for="descrizione">Descrizione:</label>
            <textarea id="descrizione" name="descrizione" rows="4"></textarea>
        </div>
        
        <hr>
        <h3>Georeferenziazione</h3>
        <div class="form-group">
            <label for="coordinate">Coordinate (Latitudine, Longitudine):</label>
            <input type="text" id="coordinate" name="coordinate" 
                   placeholder="es: 33.8626, 35.5163 (Beirut, Libano)"
                   pattern="^-?([1-8]?[0-9]\.{1}\d+|90\.{1}0+),\s*-?(180\.{1}0+|((1[0-7][0-9])|([1-9]?[0-9]))\.{1}\d+)$">
            <small style="color: #666; font-size: 0.9em;">
                Inserisci le coordinate nel formato: latitudine, longitudine (es: 41.9028, 12.4964 per Roma).
                <br>Utilizza il <a href="/geocoding" target="_blank" style="color: #3182ce;">Geocoding Interattivo</a> per trovare le coordinate precise.
            </small>
        </div>
        
        <hr>
        <h3>Immagine Operazione</h3>
        <div class="form-group">
            <label for="immagine">Immagine rappresentativa (opzionale):</label>
            <input type="file" id="immagine" name="immagine" accept="image/jpeg,image/jpg,image/png,image/gif">
            <small style="color: #666; font-size: 0.9em; display: block; margin-top: 0.5rem;">
                Formati supportati: JPG, PNG, GIF. Dimensione massima: 5MB.
                <br>L'immagine verr√† automaticamente ridimensionata e ottimizzata.
            </small>
        </div>
        
        <button type="submit">Salva Operazione</button>
    </form>
    <br>
    <a href="{{ url_for('operazioni.lista_operazioni') }}" class="cancel-link">Annulla</a>
</div>
{% endblock %}
